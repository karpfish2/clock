<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Digital Clock</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #9a9a9a;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2vw;
            margin: 0;
        }

        .clock-container {
            background: rgba(180, 180, 180, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 4vw;
            padding: 5vw 10vw;
            box-shadow: 0 2vw 4vw rgba(0, 0, 0, 0.15);
            text-align: center;
            width: 90vw;
            max-width: 100%;
            aspect-ratio: 16/9;
            border: 0.1vw solid rgba(255, 255, 255, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            gap: 2vw;
            position: relative;
        }

        .top-content {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            justify-content: center;
            align-items: center;
        }

        .date-display {
            font-size: 5vw;
            color: #222;
            font-weight: 300;
            letter-spacing: 0.2em;
        }

        .time-display {
            /* Возвращаем большой размер шрифта и используем flex-grow для растягивания */
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28vw;
            font-weight: 700;
            color: #111;
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 0.05em;
            position: relative;
            line-height: 1;
            width: 100%;
            /* min-width, чтобы избежать переноса на узких экранах */
            min-width: 0;
        }

        /* Медиа-запрос для адаптивного уменьшения шрифта на очень узких экранах */
        @media (max-width: 768px) {
            .time-display {
                font-size: 13vw;
            }
        }
        @media (max-width: 480px) {
            .time-display {
                font-size: 11vw;
            }
        }


        .time-digit {
            display: inline-block;
            transition: all 0.3s ease;
            transform: translateY(0);
        }

        .time-digit.change {
            animation: fadeChange 0.3s ease-in-out;
        }

        @keyframes fadeChange {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        .progress-section {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1vw;
        }

        .progress-container {
            position: relative;
            width: 100%;
            max-width: 50vw;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 1.5vw;
            background: #c0c0c0;
            border-radius: 0.75vw;
            overflow: hidden;
            position: relative;
            border: 0.05vw solid rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757, #ff3838);
            border-radius: 0.75vw;
            width: 0%;
            transition: width 1s ease-out;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            position: absolute;
            right: 0;
            top: -4vw;
            font-size: 2.5vw;
            font-weight: 700;
            color: #FFD700;
            text-shadow: 0.1vw 0.1vw 0.2vw rgba(0, 0, 0, 0.5);
        }

        .progress-text.complete {
            animation: bounce 0.8s ease-out, glow 2s ease-in-out infinite alternate;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-1vw); }
            60% { transform: translateY(-0.5vw); }
        }

        @keyframes glow {
            0% {
                text-shadow: 0.1vw 0.1vw 0.2vw rgba(0, 0, 0, 0.5),
                             0 0 1vw rgba(255, 215, 0, 0.6);
            }
            100% {
                text-shadow: 0.1vw 0.1vw 0.2vw rgba(0, 0, 0, 0.5),
                             0 0 2vw rgba(255, 215, 0, 0.9),
                             0 0 3vw rgba(255, 215, 0, 0.7);
            }
        }

        .week-label {
            font-size: 2vw;
            color: #222;
            font-weight: 400;
            opacity: 0;
            transition: opacity 1s ease-in;
            margin: 0;
        }

        .week-label.show {
            opacity: 1;
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(2vw);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .separator {
            opacity: 0.7;
            animation: blink 1s ease-in-out infinite alternate;
        }

        @keyframes blink {
            0% { opacity: 1; }
            100% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <div class="clock-container">
        <div class="top-content">
            <div class="date-display" id="dateDisplay"></div>
            <div class="time-display" id="timeDisplay"></div>
        </div>
        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
            <div class="week-label" id="weekLabel">Week Finishing</div>
        </div>
    </div>

    <script>
        let previousTime = '';

        function updateClock() {
            const now = new Date();

            const day = String(now.getDate()).padStart(2, '0');
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const year = String(now.getFullYear()).slice(-2);
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const dayName = dayNames[now.getDay()];

            document.getElementById('dateDisplay').textContent = `${day}.${month}.${year} ${dayName}`;

            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const currentTime = `${hours}:${minutes}:${seconds}`;

            updateTimeDisplay(currentTime);
            updateWeekProgress(now);
        }

        function updateTimeDisplay(newTime) {
            const timeDisplay = document.getElementById('timeDisplay');

            if (previousTime !== newTime) {
                const timeHtml = newTime.split('').map((char, index) => {
                    if (char === ':') {
                        return `<span class="separator">${char}</span>`;
                    }

                    const prevChar = previousTime[index] || '';
                    const shouldAnimate = char !== prevChar && previousTime !== '';

                    return `<span class="time-digit${shouldAnimate ? ' change' : ''}">${char}</span>`;
                }).join('');

                timeDisplay.innerHTML = timeHtml;

                if (previousTime !== '') {
                    setTimeout(() => {
                        const digits = timeDisplay.querySelectorAll('.time-digit.change');
                        digits.forEach(digit => digit.classList.remove('change'));
                    }, 300);
                }

                previousTime = newTime;
            }
        }

        function updateWeekProgress(now) {
            const dayOfWeek = now.getDay();
            const adjustedDay = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
            const hoursInDay = now.getHours();
            const minutesInHour = now.getMinutes();
            const secondsInMinute = now.getSeconds();

            const totalSecondsInWeek = 7 * 24 * 60 * 60;
            const secondsElapsed = (adjustedDay * 24 * 60 * 60) +
                                   (hoursInDay * 60 * 60) +
                                   (minutesInHour * 60) +
                                   secondsInMinute;

            const weekProgress = Math.min((secondsElapsed / totalSecondsInWeek) * 100, 100);

            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const weekLabel = document.getElementById('weekLabel');

            if (progressFill && progressText && weekLabel) {
                progressFill.style.width = weekProgress + '%';
                progressText.textContent = Math.round(weekProgress) + '%';

                if (weekProgress >= 99.9) {
                    progressText.classList.add('complete');
                    weekLabel.classList.add('show');
                } else {
                    progressText.classList.remove('complete');
                    weekLabel.classList.remove('show');
                }
            }
        }

        updateClock();
        setInterval(updateClock, 1000);

        setTimeout(() => {
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.transition = 'width 2s ease-out';
                updateClock();
            }
        }, 500);
    </script>
</body>
</html>
